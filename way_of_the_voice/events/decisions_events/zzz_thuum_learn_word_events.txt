namespace = zzz_thuum_learn_word

### FUND EXPEDITION
zzz_thuum_learn_word.0001 = {
    type = character_event
	title = "Fund Expedition for a Word Wall"
    desc = zzz_thuum_learn_word.0001.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = temple_church
	}

    left_portrait = {
		character = root
		animation = interested
	}

    right_portrait = {
        character = scope:courtier
        animation = interested
    }

    lower_left_portrait = {
		character = scope:option_one
	}
	lower_center_portrait = {
		character = scope:option_two
	}
	lower_right_portrait = {
		character = scope:option_three
	}

    is_valid = {
        
    }


    immediate = {
        hidden_effect = {
            create_character = {
                location = root.capital_province
                gender_female_chance = 10
                template_character = root
                faith = root.faith
                culture = root.culture
                random_traits = yes
                age = { 18 55 }
                learning = { 3 10 }
                save_scope_as = option_one
			}
            create_character = {
                location = root.capital_province
                gender_female_chance = 10
                template_character = root
                faith = root.faith
                culture = root.culture
                random_traits = yes
                age = { 18 55 }
                learning = { 10 15 }
                save_scope_as = option_two
			}
            create_character = {
                location = root.capital_province
                gender_female_chance = 10
                template_character = root
                faith = root.faith
                culture = root.culture
                random_traits = yes
                age = { 18 55 }
                learning = { 20 25 }
                save_scope_as = option_three
			}
        }
    }

    trigger = {

	}

    option = {
		name = zzz_thuum_learn_word.0001.a
		custom_tooltip = "Will fund an expedition to find a Word Wall."
        trigger = {
            exists = scope:option_one
        }
        pay_reserved_gold = {
            target = scope:option_one
            gold = 100
        }

        scope:option_one = {
            save_scope_as = chosen_exped
        }
        
        random_list = {
            50 = {
                custom_tooltip = "The expedition finds a Word Wall."
                modifier = {
                    scope:option_one = {
                        learning > 8
                    }
                    factor = 1
                }
                modifier = {
                    scope:option_one = {
                        learning >= 13
                    }
                    factor = 2
                }
                modifier = {
                    scope:option_one = {
                        learning >= 18
                    }
                    factor = 3
                }
                trigger_event = {
                    id = zzz_thuum_learn_word.0002
                    months = { 1 2 }
                }
            }
            50 = {
                custom_tooltip = "The expedition doesn't find a Word Wall."
                trigger_event = {
                    id = zzz_thuum_learn_word.0003
                    months = { 1 2 }
                }
            }
        }
	}

    option = {
		name = zzz_thuum_learn_word.0001.b
		custom_tooltip = "Will fund an expedition to find a Word Wall."
        trigger = {
            exists = scope:option_two
        }
        pay_reserved_gold = {
            target = scope:option_two
            gold = 150
        }
        scope:option_two = {
            save_scope_as = chosen_exped
        }
        
        random_list = {
            50 = {
                custom_tooltip = "The expedition finds a Word Wall."
                modifier = {
                    scope:option_two = {
                        learning > 8
                    }
                    factor = 1
                }
                modifier = {
                    scope:option_two = {
                        learning >= 13
                    }
                    factor = 2
                }
                modifier = {
                    scope:option_two = {
                        learning >= 18
                    }
                    factor = 3
                }
                trigger_event = {
                    id = zzz_thuum_learn_word.0002
                    months = { 1 2 }
                }
            }
            50 = {
                custom_tooltip = "The epxpedition doesn't find a Word Wall."
                trigger_event = {
                    id = zzz_thuum_learn_word.0003
                    months = { 1 2 }
                }
            }
        }
	}

    option = {
		name = zzz_thuum_learn_word.0001.c
		custom_tooltip = "Will fund an expedition to find a Word Wall."
        trigger = {
            exists = scope:option_three
        }
        pay_reserved_gold = {
            target = scope:option_three
            gold = 200
        }
        scope:option_three = {
            save_scope_as = chosen_exped
        }
        
        random_list = {
            40 = {
                custom_tooltip = "The expedition finds a Word Wall."
                modifier = {
                    scope:option_three = {
                        learning >= 8
                    }
                    factor = 1
                }
                modifier = {
                    scope:option_three = {
                        learning >= 13
                    }
                    factor = 2
                }
                modifier = {
                    scope:option_three = {
                        learning >= 18
                    }
                    factor = 3
                }
                trigger_event = {
                    id = zzz_thuum_learn_word.0002
                    months = { 1 2 }
                }
            }
            40 = {
                custom_tooltip = "The expedition doesn't find a Word Wall."
                trigger_event = {
                    id = zzz_thuum_learn_word.0003
                    months = { 1 2 }
                }
            }
        }
	}

    option = {
        name = "I don't think they are capable of the task."
        remove_decision_cooldown = fund_learning_thuum_decision
    }
}

zzz_thuum_learn_word.0010 = {
    type = character_event
	title = "No More Word Walls?"
    theme = diplomacy_majesty_focus

    desc = {
        first_valid = {
			triggered_desc = {
				trigger = {
					has_trait_xp = {
                        trait = thuum_trait_track
                        value < 99
                    }
				}
				desc = zzz_thuum_learn_word.0010.desc
			}
            desc = zzz_thuum_learn_word.0010.a.desc
        }
        
    }


    override_background = {
		reference = temple_church
	}

    left_portrait = {
		character = root
		animation = interested
	}

    is_valid = {
        
    }

    trigger = {

	}

    option = {
        trait = thuum_trait_track
        trigger = {
            has_trait_xp = {
                trait = thuum_trait_track
                value < 99
            }
        }
		name = "I need more time to study and improve myself."
	}

    option = {
        trigger = {
            has_trait_xp = {
                trait = thuum_trait_track
                value >= 99
            }
        }
		name = "Let's rest for now."
	}
}


### LEARN THUUM MEDITATION
zzz_thuum_learn_word.0020 = {
    type = character_event
	title = "Unlocked: Thu'um Meditation"
    theme = diplomacy_majesty_focus

    desc = zzz_thuum_learn_word.0020.desc


    override_background = {
		reference = temple_church
	}

    left_portrait = {
		character = root
		#animation = interested
	}

    is_valid = {
        
    }

    trigger = {

	}


    option = {
		name = "Praise Kynareth!"
        add_perk = thuum_meditation_perk
	}
}

### FOUND RESULT EXPEDITION
zzz_thuum_learn_word.0002 = {
    type = character_event
	title = "Success: Word Wall Found"
    desc = zzz_thuum_learn_word.0002.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = temple_church
	}

    left_portrait = {
		character = root
		animation = happiness
	}

    right_portrait = {
        character = scope:chosen_exped
    }

    immediate = {
        random_list = {
            2 = {
                modifier = {
                    #factor = 0
                    OR = {
                        NOT = {
                            has_character_flag = found_bleakfalls
                        }
                    }
                }
                
                title:b_bleak_falls.title_province = {
                    save_scope_as = location
                }
                add_character_flag = found_bleakfalls
            }
            2 = {
                modifier = {
                    #factor = 0
                    OR = {
                        NOT = {
                            has_character_flag = found_ragnvald
                        }
                    }
                }
                modifier = {
                    has_trait_xp = {
                        trait = thuum_trait_track
                        value < 33
                    }
                    factor = 0
                }
                title:b_bleak_falls.title_province = {
                    save_scope_as = location
                }
                add_character_flag = found_ragnvald
            }
            2 = {
                modifier = {
                    #factor = 0
                    OR = {
                        NOT = {
                            has_character_flag = found_ironbind
                        }
                    }
                }
                modifier = {
                    has_trait_xp = {
                        trait = thuum_trait_track
                        value < 33
                    }
                    factor = 0
                }
                title:b_bleak_falls.title_province = {
                    save_scope_as = location
                }
                add_character_flag = found_ironbind
            }
            2 = {
                modifier = {
                    has_trait_xp = {
                        trait = thuum_trait_track
                        value < 33
                    }
                    factor = 0
                }
                modifier = {
                    #factor = 0
                    OR = {
                        NOT = {
                            has_character_flag = found_northwind
                        }
                    }
                }
                title:b_bleak_falls.title_province = {
                    save_scope_as = location
                }
                add_character_flag = found_northwind
            }
            2 = {
                modifier = {
                    has_trait_xp = {
                        trait = thuum_trait_track
                        value >= 33
                    }
                    factor = 0
                }
                modifier = {
                    #factor = 0
                    OR = {
                        NOT = {
                            has_character_flag = found_valhok
                        }
                    }
                }
                title:b_vahlok.title_province = {
                    save_scope_as = location
                }
                add_character_flag = found_valhok
            }
            2 = {
                modifier = {
                    has_trait_xp = {
                        trait = thuum_trait_track
                        value >= 33
                    }
                    factor = 0
                }
                modifier = {
                    #factor = 0
                    OR = {
                        NOT = {
                            has_character_flag = found_volunruud
                        }
                    }
                }
                title:b_vahlok.title_province = {
                    save_scope_as = location
                }
                add_character_flag = found_volunruud
            }
            2 = {
                modifier = {
                    has_trait_xp = {
                        trait = thuum_trait_track
                        value >= 33
                    }
                    factor = 0
                }
                modifier = {
                    #factor = 0
                    OR = {
                        NOT = {
                            has_character_flag = found_raven
                        }
                    }
                }
                title:b_vahlok.title_province = {
                    save_scope_as = location
                }
                add_character_flag = found_raven
            }
        }
    }

    trigger = {

	}

    option = {
		name = "Well done!"
        custom_tooltip = "Unlocks a decision to visit the Word Wall"
	}
}

### FAILED RESULT EXPEDITION
zzz_thuum_learn_word.0003 = {
    type = character_event
	title = "Failed: Word Wall Not Found"
    desc = zzz_thuum_learn_word.0003.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = temple_church
	}

    left_portrait = {
		character = root
		animation = sadness
	}


    right_portrait = {
        character = scope:chosen_exped
        animation = shame
    }



    immediate = {
        
    }

    trigger = {

	}

    option = {
		name = "That's unfortunate."
		add_stress = 30
	}
}

## VISIT BLEAK FALLS EVENT
zzz_thuum_learn_word.2200 = {
    type = character_event
	title = "Word Wall: Bleak Falls Barrow"
    desc = zzz_thuum_intro.2200.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = temple_church
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        title:b_bleak_falls.title_province = {
            save_scope_as = location
        }
    }

    trigger = {

	}

    option = {
		name = "Let's head to Bleak Falls!"
		hidden_effect = {
            if = {
                limit = {
                    capital_province.barony = title:b_bleak_falls.title_province
                }
                trigger_event = zzz_thuum_learn_word.2201
            }
            else = {
                start_travel_plan = {
                    destination = title:b_bleak_falls.title_province
                    on_travel_planner_cancel_on_action = on_cancel_bleakfalls_event
                    on_arrival_event = zzz_thuum_learn_word.2201
                    on_arrival_destinations = all_but_last
                }
            }
        }
	}
    option = {
        name = "Maybe not now."
        remove_decision_cooldown = visit_bleaks_thuum_decision
    }
}

## ON ARRIVAL
zzz_thuum_learn_word.2201 = {
    type = character_event
	title = "Word Wall: Bleak Falls Barrow"
    desc = zzz_thuum_intro.2201.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = dungeon
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        current_travel_plan = {
   			delay_travel_plan = { days = 30 }
        }
    }

    trigger = {

	}

    option = {
		name = "Let's meditate."
        
        trait = thuum_trait_track
        trait = dragonborn

		if = {
            limit = {
                has_trait = dragonborn
            }
            duel = {
                skill = learning
                value = very_high_skill_rating

                100 = {
                    compare_modifier = {
                        value = scope:duel_value
                        multiplier = 3.5
                        # Always give _some_ chance.
                        min = -39
                    }
                    desc = "Your meditation succeeds"
                    custom_tooltip = "You learn a new Word of Power."
                    trigger_event = {
                        id = zzz_thuum_learn_word.2202
                        days = { 30 30 }
                    }
                }
            }
        }
        else = {
            duel = {
                skill = learning
                value = high_skill_rating

                40 = {
                    compare_modifier = {
                        value = scope:duel_value
                        multiplier = 3.5
                        # Always give _some_ chance.
                        min = -39
                    }
                    modifier = {
                        has_trait = blessed_by_kyne
                        factor = 2
                    }
                    modifier = {
                        has_trait = diligent
                        factor = 2
                    }
                    modifier = {
                        has_trait = patient
                        factor = 2
                    }
                    modifier = {
                        has_trait = zealous
                        factor = 2
                    }
                    modifier = {
                        has_trait = calm
                        factor = 2
                    }
                    modifier = {
                        culture = {
                            OR = {
                                has_cultural_pillar = heritage_nedic_south
                                has_cultural_pillar = heritage_nedic_north
                                has_cultural_pillar = heritage_nedic_central
                                has_cultural_pillar = heritage_atmoran
                            }
                            factor = 2
                        }
                    }
                    modifier = {
                        has_trait_xp = {
						    trait = thuum_trait_track
						    value >= 100
					    }
                        factor = 3
                    }
                    modifier = {
                        has_trait_xp = {
						    trait = thuum_trait_track
						    value >= 66
					    }
                        factor = 2
                    }
                    modifier = {
                        has_trait_xp = {
						    trait = thuum_trait_track
						    value >= 33
					    }
                        factor = 1
                    }
                    desc = "Your meditation succeeds"
                    custom_tooltip = "You might learn a new Word of Power."
                    trigger_event = {
                        id = zzz_thuum_learn_word.2202
                        days = { 30 30 }
                    }
                }

                40 = {
                    compare_modifier = {
                        value = scope:duel_value
                        multiplier = -3.0
                        min = -19
                    }
                    modifier = {
                        has_trait = impatient
                        factor = 2
                    }
                    modifier = {
                        culture = {
                            NOT = {
                                OR = {
                                    has_cultural_pillar = heritage_nedic_south
                                    has_cultural_pillar = heritage_nedic_north
                                    has_cultural_pillar = heritage_nedic_central
                                    has_cultural_pillar = heritage_atmoran
                                }
                            }
                            factor = 2
                        }
                    }
                    desc = "Your meditation fails"
                    custom_tooltip = "You do not learn a new Word of Power."
                    trigger_event = {
                        id = zzz_thuum_learn_word.2203
                        days = { 30 30 }
                    }
                }
            }
        }
	}
}

##SUCCESS
zzz_thuum_learn_word.2202 = {
    type = character_event
	title = "Success: Bleak Falls Barrow"
    theme = diplomacy_majesty_focus

    override_background = {
		reference = dungeon
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        if = {
            limit = {
                NOT = {
                    has_perk = unrelenting_force_perk
                    has_perk = unrelenting_force_two_perk
                    has_perk = unrelenting_force_three_perk
                }
            }
            add_character_flag = learned_fus
        }
        else_if = {
            limit = {
                has_perk = unrelenting_force_perk
                NOT = {
                    has_perk = unrelenting_force_two_perk
                    has_perk = unrelenting_force_three_perk
                }
            }
            add_character_flag = learned_ro
        }
        else = {
            limit = {
                has_perk = unrelenting_force_perk
                has_perk = unrelenting_force_two_perk
                    NOT = {
                        
                        has_perk = unrelenting_force_three_perk
                    }
            }
            add_character_flag = learned_dah
        }
    }

    desc = {
        first_valid = {
            triggered_desc = {
                trigger = {
                    has_character_flag = learned_fus
                    NOT = {
                        has_character_flag = learned_ro
                        has_character_flag = learned_dah
                    }
                }
                desc = zzz_thuum_intro.2202.desc.a
            }
            triggered_desc = {
                trigger = {
                    has_character_flag = learned_fus
                    has_character_flag = learned_ro
                    NOT = {
                        has_character_flag = learned_dah
                    }
                }
                desc = zzz_thuum_intro.2202.desc.b
            }
            desc = zzz_thuum_intro.2202.desc.c
        }
    }

    trigger = {

	}

    option = {
		name = {
            text = {
                first_valid = {
                    triggered_desc = {
                        trigger = {
                            has_character_flag = learned_fus
                            NOT = {
                                has_character_flag = learned_ro
                                has_character_flag = learned_dah
                            }
                        }
                        desc = zzz_thuum_intro.2202.option.a
                    }
                    triggered_desc = {
                        trigger = {
                            has_character_flag = learned_fus
                            has_character_flag = learned_ro
                            NOT = {
                                has_character_flag = learned_dah
                            }
                        }
                        desc = zzz_thuum_intro.2202.option.b
                    }
                    desc = zzz_thuum_intro.2202.option.c
                }
            }
        }
        if = {
            limit = {
                NOT = {
                    has_perk = unrelenting_force_perk
                    has_perk = unrelenting_force_two_perk
                    has_perk = unrelenting_force_three_perk
                }
            }
            add_perk = unrelenting_force_perk
            create_character_memory = { type = learned_thuum_word }
        }
        else_if = {
            limit = {
                has_perk = unrelenting_force_perk
                NOT = {
                    has_perk = unrelenting_force_two_perk
                    has_perk = unrelenting_force_three_perk
                }
            }
            add_perk = unrelenting_force_two_perk
            create_character_memory = { type = learned_thuum_word }
        }
        else_if = {
            limit = {
            has_perk = unrelenting_force_perk
            has_perk = unrelenting_force_two_perk
                NOT = {
                    
                    has_perk = unrelenting_force_three_perk
                }
            }
            add_perk = unrelenting_force_three_perk
            create_character_memory = { type = learned_thuum_word }
        }
	}
}

##FAIL
zzz_thuum_learn_word.2203 = {
    type = character_event
	title = "Failed: Bleak Falls Barrow"
    desc = zzz_thuum_intro.2203.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = temple_church
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        
    }

    trigger = {

	}

    option = {
		name = "Failure..."
        remove_decision_cooldown = visit_bleaks_thuum_decision
        add_stress = 30
	}
}

## VISIT RAGNVALD RUINS EVENT
zzz_thuum_learn_word.2300 = {
    type = character_event
	title = "Word Wall: Ragnvald Ruins"
    desc = zzz_thuum_intro.2300.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = temple_church
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        title:b_ragnvald.title_province = {
            save_scope_as = location
        }
    }

    trigger = {

	}

    option = {
		name = "Let's head to Ragnvald!"
		hidden_effect = {
            if = {
                limit = {
                    capital_province.barony = title:b_ragnvald.title_province
                }
                trigger_event = zzz_thuum_learn_word.2301
            }
            else = {
                start_travel_plan = {
                    destination = title:b_ragnvald.title_province
                    on_travel_planner_cancel_on_action = on_cancel_ragnvald_event
                    on_arrival_event = zzz_thuum_learn_word.2301
                    on_arrival_destinations = all_but_last
                }
            }
        }
	}
    option = {
        name = "Maybe not now."
        remove_decision_cooldown = visit_bleaks_thuum_decision
    }
}

## ON ARRIVAL
zzz_thuum_learn_word.2301 = {
    type = character_event
	title = "Word Wall: Ragnvald Ruins"
    desc = zzz_thuum_intro.2301.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = dungeon
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        current_travel_plan = {
   			delay_travel_plan = { days = 30 }
        }
    }

    trigger = {

	}

    option = {
		name = "Let's meditate."
        
        trait = thuum_trait_track
        trait = dragonborn

		if = {
            limit = {
                has_trait = dragonborn
            }
            duel = {
                skill = learning
                value = very_high_skill_rating

                100 = {
                    compare_modifier = {
                        value = scope:duel_value
                        multiplier = 3.5
                        # Always give _some_ chance.
                        min = -39
                    }
                    desc = "Your meditation succeeds"
                    custom_tooltip = "You learn a new Word of Power."
                    trigger_event = {
                        id = zzz_thuum_learn_word.2302
                        days = { 30 30 }
                    }
                }
            }
        }
        else = {
            duel = {
                skill = learning
                value = very_high_skill_rating

                40 = {
                    compare_modifier = {
                        value = scope:duel_value
                        multiplier = 3.5
                        # Always give _some_ chance.
                        min = -39
                    }
                    modifier = {
                        has_trait = blessed_by_kyne
                        factor = 2
                    }
                    modifier = {
                        has_trait = diligent
                        factor = 2
                    }
                    modifier = {
                        has_trait = patient
                        factor = 2
                    }
                    modifier = {
                        has_trait = zealous
                        factor = 2
                    }
                    modifier = {
                        has_trait = calm
                        factor = 2
                    }
                    modifier = {
                        culture = {
                            OR = {
                                has_cultural_pillar = heritage_nedic_south
                                has_cultural_pillar = heritage_nedic_north
                                has_cultural_pillar = heritage_nedic_central
                                has_cultural_pillar = heritage_atmoran
                            }
                            factor = 2
                        }
                    }
                    modifier = {
                        has_trait_xp = {
						    trait = thuum_trait_track
						    value >= 100
					    }
                        factor = 3
                    }
                    modifier = {
                        has_trait_xp = {
						    trait = thuum_trait_track
						    value >= 66
					    }
                        factor = 2
                    }
                    modifier = {
                        has_trait_xp = {
						    trait = thuum_trait_track
						    value >= 33
					    }
                        factor = 1
                    }
                    desc = "Your meditation succeeds"
                    custom_tooltip = "You might learn a new Word of Power."
                    trigger_event = {
                        id = zzz_thuum_learn_word.2302
                        days = { 30 30 }
                    }
                }

                40 = {
                    compare_modifier = {
                        value = scope:duel_value
                        multiplier = -3.0
                        min = -19
                    }
                    modifier = {
                        has_trait = wrathful
                        factor = 2
                    }
                    modifier = {
                        has_trait = sadistic
                        factor = 2
                    }
                    modifier = {
                        has_trait = cynical
                        factor = 2
                    }
                    modifier = {
                        has_trait = callous
                        factor = 2
                    }
                    modifier = {
                        culture = {
                            NOT = {
                                OR = {
                                    has_cultural_pillar = heritage_nedic_south
                                    has_cultural_pillar = heritage_nedic_north
                                    has_cultural_pillar = heritage_nedic_central
                                    has_cultural_pillar = heritage_atmoran
                                }
                            }
                            factor = 2
                        }
                    }
                    desc = "Your meditation fails"
                    custom_tooltip = "You do not learn a new Word of Power."
                    trigger_event = {
                        id = zzz_thuum_learn_word.2203
                        days = { 30 30 }
                    }
                }
            }
        }
	}
}

##SUCCESS
zzz_thuum_learn_word.2302 = {
    type = character_event
	title = "Success: Ragnvald Ruins"
    theme = diplomacy_majesty_focus

    override_background = {
		reference = dungeon
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        if = {
            limit = {
                NOT = {
                    has_perk = kyne_peace_perk
                    has_perk = kyne_peace_two_perk
                    has_perk = kyne_peace_three_perk
                }
            }
            add_character_flag = learned_kaan
        }
        else_if = {
            limit = {
                has_perk = kyne_peace_perk
                NOT = {
                    has_perk = kyne_peace_two_perk
                    has_perk = kyne_peace_three_perk
                }
            }
            add_character_flag = learned_drem
        }
        else = {
            limit = {
                has_perk = kyne_peace_perk
                has_perk = kyne_peace_two_perk
                    NOT = {
                        
                        has_perk = kyne_peace_three_perk
                    }
            }
            add_character_flag = learned_ov
        }
    }

    desc = {
        first_valid = {
            triggered_desc = {
                trigger = {
                    NOT = {
                        has_character_flag = learned_kaan
                        has_character_flag = learned_drem
                        has_character_flag = learned_ov
                    }
                }
                desc = zzz_thuum_intro.2302.desc.a
            }
            triggered_desc = {
                trigger = {
                    has_character_flag = learned_kaan
                    NOT = {
                        has_character_flag = learned_drem
                        has_character_flag = learned_ov
                    }
                }
                desc = zzz_thuum_intro.2302.desc.a
            }
            triggered_desc = {
                trigger = {
                    has_character_flag = learned_kaan
                    has_character_flag = learned_drem
                    NOT = {
                        has_character_flag = learned_ov
                    }
                }
                desc = zzz_thuum_intro.2302.desc.b
            }
            desc = zzz_thuum_intro.2302.desc.c
        }
    }

    trigger = {

	}

    option = {
		name = {
            text = {
                first_valid = {
                    triggered_desc = {
                        trigger = {
                            NOT = {
                                has_character_flag = learned_kaan
                                has_character_flag = learned_drem
                                has_character_flag = learned_ov
                            }
                        }
                        desc = zzz_thuum_intro.2302.desc.a
                    }
                    triggered_desc = {
                        trigger = {
                            has_character_flag = learned_kaan
                            NOT = {
                                has_character_flag = learned_drem
                                has_character_flag = learned_ov
                            }
                        }
                        desc = zzz_thuum_intro.2302.option.a
                    }
                    triggered_desc = {
                        trigger = {
                            has_character_flag = learned_kaan
                            has_character_flag = learned_drem
                            NOT = {
                                has_character_flag = learned_ov
                            }
                        }
                        desc = zzz_thuum_intro.2302.option.b
                    }
                    desc = zzz_thuum_intro.2302.option.c
                }
            }
        }
        if = {
            limit = {
                NOT = {
                    has_perk = kyne_peace_perk
                    has_perk = kyne_peace_two_perk
                    has_perk = kyne_peace_three_perk
                }
            }
            add_perk = kyne_peace_perk
            create_character_memory = { type = learned_thuum_word }
        }
        else_if = {
            limit = {
                has_perk = kyne_peace_perk
                NOT = {
                    has_perk = kyne_peace_two_perk
                    has_perk = kyne_peace_three_perk
                }
            }
            add_perk = kyne_peace_two_perk
            create_character_memory = { type = learned_thuum_word }
        }
        else_if = {
            limit = {
            has_perk = kyne_peace_perk
            has_perk = kyne_peace_two_perk
                NOT = {
                    
                    has_perk = kyne_peace_three_perk
                }
            }
            add_perk = kyne_peace_three_perk
            create_character_memory = { type = learned_thuum_word }
        }
	}
}

##FAIL
zzz_thuum_learn_word.2303 = {
    type = character_event
	title = "Failed: Ragnvald Ruins"
    desc = zzz_thuum_intro.2303.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = dungeon
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        
    }

    trigger = {

	}

    option = {
		name = "Failure..."
        remove_decision_cooldown = visit_ragnvald_thuum_decision
        add_stress = 30
	}
}

## VISIT IRONBIND BARROW EVENT
zzz_thuum_learn_word.2400 = {
    type = character_event
	title = "Word Wall: Ironbind Barrow"
    desc = zzz_thuum_intro.2400.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = temple_church
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        title:b_ironbind.title_province = {
            save_scope_as = location
        }
    }

    trigger = {

	}

    option = {
		name = "Let's head to Ironbind!"
		hidden_effect = {
            if = {
                limit = {
                    capital_province.barony = title:b_ironbind.title_province
                }
                trigger_event = zzz_thuum_learn_word.2401
            }
            else = {
                start_travel_plan = {
                    destination = title:b_ironbind.title_province
                    on_travel_planner_cancel_on_action = on_cancel_ironbind_event
                    on_arrival_event = zzz_thuum_learn_word.2401
                    on_arrival_destinations = all_but_last
                }
            }
        }
	}
    option = {
        name = "Maybe not now."
        remove_decision_cooldown = visit_ironbind_thuum_decision
    }
}

## ON ARRIVAL
zzz_thuum_learn_word.2401 = {
    type = character_event
	title = "Word Wall: Ironbind Barrow"
    desc = zzz_thuum_intro.2401.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = dungeon
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        current_travel_plan = {
   			delay_travel_plan = { days = 30 }
        }
    }

    trigger = {

	}

    option = {
		name = "Let's meditate."
        
        trait = thuum_trait_track
        trait = dragonborn

		if = {
            limit = {
                has_trait = dragonborn
            }
            duel = {
                skill = learning
                value = very_high_skill_rating

                100 = {
                    compare_modifier = {
                        value = scope:duel_value
                        multiplier = 3.5
                        # Always give _some_ chance.
                        min = -39
                    }
                    desc = "Your meditation succeeds"
                    custom_tooltip = "You learn a new Word of Power."
                    trigger_event = {
                        id = zzz_thuum_learn_word.2402
                        days = { 30 30 }
                    }
                }
            }
        }
        else = {
            duel = {
                skill = learning
                value = very_high_skill_rating

                40 = {
                    compare_modifier = {
                        value = scope:duel_value
                        multiplier = 3.5
                        # Always give _some_ chance.
                        min = -39
                    }
                    modifier = {
                        has_trait = blessed_by_kyne
                        factor = 2
                    }
                    modifier = {
                        has_trait = diligent
                        factor = 2
                    }
                    modifier = {
                        has_trait = patient
                        factor = 2
                    }
                    modifier = {
                        has_trait = zealous
                        factor = 2
                    }
                    modifier = {
                        has_trait = calm
                        factor = 2
                    }
                    modifier = {
                        culture = {
                            OR = {
                                has_cultural_pillar = heritage_nedic_south
                                has_cultural_pillar = heritage_nedic_north
                                has_cultural_pillar = heritage_nedic_central
                                has_cultural_pillar = heritage_atmoran
                            }
                            factor = 2
                        }
                    }
                    modifier = {
                        has_trait_xp = {
						    trait = thuum_trait_track
						    value >= 100
					    }
                        factor = 3
                    }
                    modifier = {
                        has_trait_xp = {
						    trait = thuum_trait_track
						    value >= 66
					    }
                        factor = 2
                    }
                    modifier = {
                        has_trait_xp = {
						    trait = thuum_trait_track
						    value >= 33
					    }
                        factor = 1
                    }
                    desc = "Your meditation succeeds"
                    custom_tooltip = "You might learn a new Word of Power."
                    trigger_event = {
                        id = zzz_thuum_learn_word.2402
                        days = { 30 30 }
                    }
                }

                40 = {
                    compare_modifier = {
                        value = scope:duel_value
                        multiplier = -3.0
                        min = -19
                    }
                    modifier = {
                        has_trait = wrathful
                        factor = 2
                    }
                    modifier = {
                        has_trait = sadistic
                        factor = 2
                    }
                    modifier = {
                        has_trait = cynical
                        factor = 2
                    }
                    modifier = {
                        has_trait = callous
                        factor = 2
                    }
                    modifier = {
                        culture = {
                            NOT = {
                                OR = {
                                    has_cultural_pillar = heritage_nedic_south
                                    has_cultural_pillar = heritage_nedic_north
                                    has_cultural_pillar = heritage_nedic_central
                                    has_cultural_pillar = heritage_atmoran
                                }
                            }
                            factor = 2
                        }
                    }
                    desc = "Your meditation fails"
                    custom_tooltip = "You do not learn a new Word of Power."
                    trigger_event = {
                        id = zzz_thuum_learn_word.2403
                        days = { 30 30 }
                    }
                }
            }
        }
	}
}

##SUCCESS
zzz_thuum_learn_word.2402 = {
    type = character_event
	title = "Success: Ironbind Barrow"
    theme = diplomacy_majesty_focus

    override_background = {
		reference = dungeon
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        if = {
            limit = {
                NOT = {
                    has_perk = clear_skies_perk
                    has_perk = clear_skies_two_perk
                    has_perk = clear_skies_three_perk
                }
            }
            add_character_flag = learned_lok
        }
        else_if = {
            limit = {
                has_perk = clear_skies_perk
                NOT = {
                    has_perk = clear_skies_two_perk
                    has_perk = clear_skies_three_perk
                }
            }
            add_character_flag = learned_vah
        }
        else = {
            limit = {
                has_perk = clear_skies_perk
                has_perk = clear_skies_two_perk
                    NOT = {
                        
                        has_perk = clear_skies_three_perk
                    }
            }
            add_character_flag = learned_koor
        }
    }

    desc = {
        first_valid = {
            triggered_desc = {
                trigger = {
                    NOT = {
                        has_character_flag = learned_lok
                        has_character_flag = learned_vah
                        has_character_flag = learned_koor
                    }
                }
                desc = zzz_thuum_intro.2402.desc.a
            }
            triggered_desc = {
                trigger = {
                    has_character_flag = learned_lok
                    NOT = {
                        has_character_flag = learned_vah
                        has_character_flag = learned_koor
                    }
                }
                desc = zzz_thuum_intro.2402.desc.a
            }
            triggered_desc = {
                trigger = {
                    has_character_flag = learned_fus
                    has_character_flag = learned_vah
                    NOT = {
                        has_character_flag = learned_koor
                    }
                }
                desc = zzz_thuum_intro.2402.desc.b
            }
            desc = zzz_thuum_intro.2402.desc.c
        }
    }

    trigger = {

	}

    option = {
		name = {
            text = {
                first_valid = {
                    triggered_desc = {
                        trigger = {
                            NOT = {
                                has_character_flag = learned_lok
                                has_character_flag = learned_vah
                                has_character_flag = learned_koor
                            }
                        }
                        desc = zzz_thuum_intro.2402.desc.a
                    }
                    triggered_desc = {
                        trigger = {
                            has_character_flag = learned_lok
                            NOT = {
                                has_character_flag = learned_vah
                                has_character_flag = learned_koor
                            }
                        }
                        desc = zzz_thuum_intro.2402.option.a
                    }
                    triggered_desc = {
                        trigger = {
                            has_character_flag = learned_lok
                            has_character_flag = learned_vah
                            NOT = {
                                has_character_flag = learned_koor
                            }
                        }
                        desc = zzz_thuum_intro.2402.option.b
                    }
                    desc = zzz_thuum_intro.2402.option.c
                }
            }
        }
        if = {
            limit = {
                NOT = {
                    has_perk = clear_skies_perk
                    has_perk = clear_skies_two_perk
                    has_perk = clear_skies_three_perk
                }
            }
            add_perk = clear_skies_perk
            create_character_memory = { type = learned_thuum_word }
        }
        else_if = {
            limit = {
                has_perk = clear_skies_perk
                NOT = {
                    has_perk = clear_skies_two_perk
                    has_perk = clear_skies_three_perk
                }
            }
            add_perk = clear_skies_two_perk
            create_character_memory = { type = learned_thuum_word }
        }
        else_if = {
            limit = {
            has_perk = clear_skies_perk
            has_perk = clear_skies_two_perk
                NOT = {
                    
                    has_perk = clear_skies_three_perk
                }
            }
            add_perk = clear_skies_three_perk
            create_character_memory = { type = learned_thuum_word }
        }
	}
}

##FAIL
zzz_thuum_learn_word.2403 = {
    type = character_event
	title = "Failed: Ironbind Barrow"
    desc = zzz_thuum_intro.2403.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = dungeon
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        
    }

    trigger = {

	}

    option = {
		name = "Failure..."
        remove_decision_cooldown = visit_ironbind_thuum_decision
        add_stress = 30
	}
}

## VISIT NORTHWIND MOUNTAINS EVENT
zzz_thuum_learn_word.2500 = {
    type = character_event
	title = "Word Wall: Northwind Mountains"
    desc = zzz_thuum_intro.2500.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = temple_church
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        title:b_shor_stone.title_province = {
            save_scope_as = location
        }
    }

    trigger = {

	}

    option = {
		name = "Let's head to the Northwind Mountains!"
		hidden_effect = {
            if = {
                limit = {
                    capital_province.barony = title:b_shor_stone.title_province
                }
                trigger_event = zzz_thuum_learn_word.2501
            }
            else = {
                start_travel_plan = {
                    destination = title:b_shor_stone.title_province
                    on_travel_planner_cancel_on_action = on_cancel_northwind_event
                    on_arrival_event = zzz_thuum_learn_word.2501
                    on_arrival_destinations = all_but_last
                }
            }
        }
	}
    option = {
        name = "Maybe not now."
        remove_decision_cooldown = visit_northwind_thuum_decision
    }
}

## ON ARRIVAL
zzz_thuum_learn_word.2501 = {
    type = character_event
	title = "Word Wall: Northwind Mountains"
    desc = zzz_thuum_intro.2501.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = wilderness_mountains
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        current_travel_plan = {
   			delay_travel_plan = { days = 30 }
        }
    }

    trigger = {

	}

    option = {
		name = "Let's meditate."
        
        trait = thuum_trait_track
        trait = dragonborn

		if = {
            limit = {
                has_trait = dragonborn
            }
            duel = {
                skill = learning
                value = very_high_skill_rating

                100 = {
                    compare_modifier = {
                        value = scope:duel_value
                        multiplier = 3.5
                        # Always give _some_ chance.
                        min = -39
                    }
                    desc = "Your meditation succeeds"
                    custom_tooltip = "You learn a new Word of Power."
                    trigger_event = {
                        id = zzz_thuum_learn_word.2502
                        days = { 30 30 }
                    }
                }
            }
        }
        else = {
            duel = {
                skill = learning
                value = very_high_skill_rating

                40 = {
                    compare_modifier = {
                        value = scope:duel_value
                        multiplier = 3.5
                        # Always give _some_ chance.
                        min = -39
                    }
                    modifier = {
                        has_trait = blessed_by_kyne
                        factor = 2
                    }
                    modifier = {
                        has_trait = diligent
                        factor = 2
                    }
                    modifier = {
                        has_trait = patient
                        factor = 2
                    }
                    modifier = {
                        has_trait = zealous
                        factor = 2
                    }
                    modifier = {
                        has_trait = calm
                        factor = 2
                    }
                    modifier = {
                        culture = {
                            OR = {
                                has_cultural_pillar = heritage_nedic_south
                                has_cultural_pillar = heritage_nedic_north
                                has_cultural_pillar = heritage_nedic_central
                                has_cultural_pillar = heritage_atmoran
                            }
                            factor = 2
                        }
                    }
                    modifier = {
                        has_trait_xp = {
						    trait = thuum_trait_track
						    value >= 100
					    }
                        factor = 3
                    }
                    modifier = {
                        has_trait_xp = {
						    trait = thuum_trait_track
						    value >= 66
					    }
                        factor = 2
                    }
                    modifier = {
                        has_trait_xp = {
						    trait = thuum_trait_track
						    value >= 33
					    }
                        factor = 1
                    }
                    desc = "Your meditation succeeds"
                    custom_tooltip = "You might learn a new Word of Power."
                    trigger_event = {
                        id = zzz_thuum_learn_word.2502
                        days = { 30 30 }
                    }
                }

                40 = {
                    compare_modifier = {
                        value = scope:duel_value
                        multiplier = -3.0
                        min = -19
                    }
                    modifier = {
                        has_trait = wrathful
                        factor = 2
                    }
                    modifier = {
                        has_trait = sadistic
                        factor = 2
                    }
                    modifier = {
                        has_trait = cynical
                        factor = 2
                    }
                    modifier = {
                        has_trait = callous
                        factor = 2
                    }
                    modifier = {
                        culture = {
                            NOT = {
                                OR = {
                                    has_cultural_pillar = heritage_nedic_south
                                    has_cultural_pillar = heritage_nedic_north
                                    has_cultural_pillar = heritage_nedic_central
                                    has_cultural_pillar = heritage_atmoran
                                }
                            }
                            factor = 2
                        }
                    }
                    desc = "Your meditation fails"
                    custom_tooltip = "You do not learn a new Word of Power."
                    trigger_event = {
                        id = zzz_thuum_learn_word.2503
                        days = { 30 30 }
                    }
                }
            }
        }
	}
}

##SUCCESS
zzz_thuum_learn_word.2502 = {
    type = character_event
	title = "Success: Northwind Mountains"

    theme = diplomacy_majesty_focus

    override_background = {
		reference = wilderness_mountains
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        if = {
            limit = {
                NOT = {
                    has_perk = whirlwind_sprint_perk
                    has_perk = whirlwind_sprint_two_perk
                    has_perk = whirlwind_sprint_three_perk
                }
            }
            add_character_flag = learned_wuld
        }
        else_if = {
            limit = {
                has_perk = whirlwind_sprint_perk
                NOT = {
                    has_perk = whirlwind_sprint_two_perk
                    has_perk = whirlwind_sprint_three_perk
                }
            }
            add_character_flag = learned_nah
        }
        else = {
            limit = {
                has_perk = whirlwind_sprint_perk
                has_perk = whirlwind_sprint_two_perk
                    NOT = {
                        
                        has_perk = whirlwind_sprint_three_perk
                    }
            }
            add_character_flag = learned_kest
        }
    }

    desc = {
        first_valid = {
            triggered_desc = {
                trigger = {
                    NOT = {
                        has_character_flag = learned_wuld
                        has_character_flag = learned_nah
                        has_character_flag = learned_kest
                    }
                }
                desc = zzz_thuum_intro.2502.desc.a
            }
            triggered_desc = {
                trigger = {
                    has_character_flag = learned_wuld
                    NOT = {
                        has_character_flag = learned_nah
                        has_character_flag = learned_kest
                    }
                }
                desc = zzz_thuum_intro.2502.desc.a
            }
            triggered_desc = {
                trigger = {
                    has_character_flag = learned_wuld
                    has_character_flag = learned_nah
                    NOT = {
                        has_character_flag = learned_kest
                    }
                }
                desc = zzz_thuum_intro.2502.desc.b
            }
            desc = zzz_thuum_intro.2502.desc.c
        }
    }

    trigger = {

	}

    option = {
		name = {
            text = {
                first_valid = {
                    triggered_desc = {
                        trigger = {
                            NOT = {
                                has_character_flag = learned_wuld
                                has_character_flag = learned_nah
                                has_character_flag = learned_kest
                            }
                        }
                        desc = zzz_thuum_intro.2502.desc.a
                    }
                    triggered_desc = {
                        trigger = {
                            has_character_flag = learned_wuld
                            NOT = {
                                has_character_flag = learned_nah
                                has_character_flag = learned_kest
                            }
                        }
                        desc = zzz_thuum_intro.2502.option.a
                    }
                    triggered_desc = {
                        trigger = {
                            has_character_flag = learned_wuld
                            has_character_flag = learned_nah
                            NOT = {
                                has_character_flag = learned_kest
                            }
                        }
                        desc = zzz_thuum_intro.2502.option.b
                    }
                    desc = zzz_thuum_intro.2502.option.c
                }
            }
        }
        if = {
            limit = {
                NOT = {
                    has_perk = whirlwind_sprint_perk
                    has_perk = whirlwind_sprint_two_perk
                    has_perk = whirlwind_sprint_three_perk
                }
            }
            add_perk = whirlwind_sprint_perk
            create_character_memory = { type = learned_thuum_word }
        }
        else_if = {
            limit = {
                has_perk = whirlwind_sprint_perk
                NOT = {
                    has_perk = whirlwind_sprint_two_perk
                    has_perk = whirlwind_sprint_three_perk
                }
            }
            add_perk = whirlwind_sprint_two_perk
            create_character_memory = { type = learned_thuum_word }
        }
        else_if = {
            limit = {
            has_perk = whirlwind_sprint_perk
            has_perk = whirlwind_sprint_two_perk
                NOT = {
                    
                    has_perk = whirlwind_sprint_three_perk
                }
            }
            add_perk = whirlwind_sprint_three_perk
            create_character_memory = { type = learned_thuum_word }
        }
	}
}

##FAIL
zzz_thuum_learn_word.2503 = {
    type = character_event
	title = "Failed: Northwind Mountains"
    desc = zzz_thuum_intro.2503.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = wilderness_mountains
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        
    }

    trigger = {

	}

    option = {
		name = "Failure..."
        remove_decision_cooldown = visit_northwind_thuum_decision
        add_stress = 30
	}
}

## VISIT VAHLOK TOMB EVENT
zzz_thuum_learn_word.2600 = {
    type = character_event
	title = "Word Wall: Vahlok's Tomb"
    desc = zzz_thuum_intro.2600.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = temple_church
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        title:b_vahlok.title_province = {
            save_scope_as = location
        }
    }

    trigger = {

	}

    option = {
		name = "Let's head to the Vahlok's Tomb!"
		hidden_effect = {
            if = {
                limit = {
                    capital_province.barony = title:b_vahlok.title_province
                }
                trigger_event = zzz_thuum_learn_word.2601
            }
            else = {
                start_travel_plan = {
                    destination = title:b_vahlok.title_province
                    on_travel_planner_cancel_on_action = on_cancel_vahlok_event
                    on_arrival_event = zzz_thuum_learn_word.2601
                    on_arrival_destinations = all_but_last
                }
            }
        }
	}
    option = {
        name = "Maybe not now."
        remove_decision_cooldown = visit_vahlok_thuum_decision
    }
}

## ON ARRIVAL
zzz_thuum_learn_word.2601 = {
    type = character_event
	title = "Word Wall: Vahlok's Tomb"
    desc = zzz_thuum_intro.2601.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = wilderness_mountains
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        current_travel_plan = {
   			delay_travel_plan = { days = 30 }
        }
    }

    trigger = {

	}

    option = {
		name = "Let's meditate."
        
        trait = thuum_trait_track
        trait = dragonborn

		if = {
            limit = {
                has_trait = dragonborn
            }
            duel = {
                skill = learning
                value = very_high_skill_rating

                100 = {
                    compare_modifier = {
                        value = scope:duel_value
                        multiplier = 3.5
                        # Always give _some_ chance.
                        min = -39
                    }
                    desc = "Your meditation succeeds"
                    custom_tooltip = "You learn a new Word of Power."
                    trigger_event = {
                        id = zzz_thuum_learn_word.2602
                        days = { 30 30 }
                    }
                }
            }
        }
        else = {
            duel = {
                skill = learning
                value = very_high_skill_rating

                40 = {
                    compare_modifier = {
                        value = scope:duel_value
                        multiplier = 3.5
                        # Always give _some_ chance.
                        min = -39
                    }
                    modifier = {
                        has_trait = blessed_by_kyne
                        factor = 2
                    }
                    modifier = {
                        has_trait = diligent
                        factor = 2
                    }
                    modifier = {
                        has_trait = patient
                        factor = 2
                    }
                    modifier = {
                        has_trait = zealous
                        factor = 2
                    }
                    modifier = {
                        has_trait = calm
                        factor = 2
                    }
                    modifier = {
                        culture = {
                            OR = {
                                has_cultural_pillar = heritage_nedic_south
                                has_cultural_pillar = heritage_nedic_north
                                has_cultural_pillar = heritage_nedic_central
                                has_cultural_pillar = heritage_atmoran
                            }
                            factor = 2
                        }
                    }
                    modifier = {
                        has_trait_xp = {
						    trait = thuum_trait_track
						    value >= 100
					    }
                        factor = 3
                    }
                    modifier = {
                        has_trait_xp = {
						    trait = thuum_trait_track
						    value >= 66
					    }
                        factor = 2
                    }
                    modifier = {
                        has_trait_xp = {
						    trait = thuum_trait_track
						    value >= 33
					    }
                        factor = 1
                    }
                    desc = "Your meditation succeeds"
                    custom_tooltip = "You might learn a new Word of Power."
                    trigger_event = {
                        id = zzz_thuum_learn_word.2602
                        days = { 30 30 }
                    }
                }
 
                40 = {
                    compare_modifier = {
                        value = scope:duel_value
                        multiplier = -3.0
                        min = -19
                    }
                    modifier = {
                        has_trait = wrathful
                        factor = 2
                    }
                    modifier = {
                        has_trait = sadistic
                        factor = 2
                    }
                    modifier = {
                        has_trait = cynical
                        factor = 2
                    }
                    modifier = {
                        has_trait = callous
                        factor = 2
                    }
                    modifier = {
                        culture = {
                            NOT = {
                                OR = {
                                    has_cultural_pillar = heritage_nedic_south
                                    has_cultural_pillar = heritage_nedic_north
                                    has_cultural_pillar = heritage_nedic_central
                                    has_cultural_pillar = heritage_atmoran
                                }
                            }
                            factor = 2
                        }
                    }
                    desc = "Your meditation fails"
                    custom_tooltip = "You do not learn a new Word of Power."
                    trigger_event = {
                        id = zzz_thuum_learn_word.2603
                        days = { 30 30 }
                    }
                }
            }
        }
	}
}

##SUCCESS
zzz_thuum_learn_word.2602 = {
    type = character_event
	title = "Success: Vahlok's Tomb"

    theme = diplomacy_majesty_focus

    override_background = {
		reference = wilderness_mountains
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        if = {
            limit = {
                NOT = {
                    has_perk = battle_fury_perk
                    has_perk = battle_fury_two_perk
                    has_perk = battle_fury_three_perk
                }
            }
            add_character_flag = learned_faas
        }
        else_if = {
            limit = {
                    has_perk = battle_fury_perk
                NOT = {
                    has_perk = battle_fury_two_perk
                    has_perk = battle_fury_three_perk
                }
            }
            add_character_flag = learned_ru
        }
        else = {
            limit = {
                    has_perk = battle_fury_perk
                    has_perk = battle_fury_two_perk
                    NOT = {
                        
                    has_perk = battle_fury_three_perk
                    }
            }
            add_character_flag = learned_maar
        }
    }

    desc = {
        first_valid = {
            triggered_desc = {
                trigger = {
                    NOT = {
                        has_character_flag = learned_faas
                        has_character_flag = learned_ru
                        has_character_flag = learned_maar
                    }
                }
                desc = zzz_thuum_intro.2602.desc.a
            }
            triggered_desc = {
                trigger = {
                    has_character_flag = learned_faas
                    NOT = {
                        has_character_flag = learned_ru
                        has_character_flag = learned_maar
                    }
                }
                desc = zzz_thuum_intro.2602.desc.a
            }
            triggered_desc = {
                trigger = {
                    has_character_flag = learned_faas
                    has_character_flag = learned_ru
                    NOT = {
                        has_character_flag = learned_maar
                    }
                }
                desc = zzz_thuum_intro.2602.desc.b
            }
            desc = zzz_thuum_intro.2602.desc.c
        }
    }

    trigger = {

	}

    option = {
		name = {
            text = {
                first_valid = {
                    triggered_desc = {
                        trigger = {
                            NOT = {
                                has_character_flag = learned_faas
                                has_character_flag = learned_ru
                                has_character_flag = learned_maar
                            }
                        }
                        desc = zzz_thuum_intro.2602.desc.a
                    }
                    triggered_desc = {
                        trigger = {
                            has_character_flag = learned_faas
                            NOT = {
                                has_character_flag = learned_ru
                                has_character_flag = learned_maar
                            }
                        }
                        desc = zzz_thuum_intro.2602.option.a
                    }
                    triggered_desc = {
                        trigger = {
                            has_character_flag = learned_faas
                            has_character_flag = learned_ru
                            NOT = {
                                has_character_flag = learned_maar
                            }
                        }
                        desc = zzz_thuum_intro.2602.option.b
                    }
                    desc = zzz_thuum_intro.2602.option.c
                }
            }
        }
        if = {
            limit = {
                NOT = {
                    has_perk = battle_fury_perk
                    has_perk = battle_fury_two_perk
                    has_perk = battle_fury_three_perk
                }
            }
            add_perk = battle_fury_perk
            create_character_memory = { type = learned_thuum_word }
        }
        else_if = {
            limit = {
                has_perk = battle_fury_perk
                NOT = {
                    has_perk = battle_fury_two_perk
                    has_perk = battle_fury_three_perk
                }
            }
            add_perk = battle_fury_two_perk
            create_character_memory = { type = learned_thuum_word }
        }
        else_if = {
            limit = {
            has_perk = battle_fury_perk
            has_perk = battle_fury_two_perk
                NOT = {
                    
                    has_perk = battle_fury_three_perk
                }
            }
            add_perk = battle_fury_three_perk
            create_character_memory = { type = learned_thuum_word }
        }
	}
}

##FAIL
zzz_thuum_learn_word.2603 = {
    type = character_event
	title = "Failed: Northwind Mountains"
    desc = zzz_thuum_intro.2603.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = wilderness_mountains
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        
    }

    trigger = {

	}

    option = {
		name = "Failure..."
        remove_decision_cooldown = visit_vahlok_thuum_decision
        add_stress = 30
	}
}

## VISIT VOLUNRUUD TOMB EVENT
zzz_thuum_learn_word.2700 = {
    type = character_event
	title = "Word Wall: Volunruud"
    desc = zzz_thuum_intro.2700.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = temple_church
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        title:b_volunruud.title_province = {
            save_scope_as = location
        }
    }

    trigger = {

	}

    option = {
		name = "Let's head to Volunruud!"
		hidden_effect = {
            if = {
                limit = {
                    capital_province.barony = title:b_volunruud.title_province
                }
                trigger_event = zzz_thuum_learn_word.2701
            }
            else = {
                start_travel_plan = {
                    destination = title:b_volunruud.title_province
                    on_travel_planner_cancel_on_action = on_cancel_volunruud_event
                    on_arrival_event = zzz_thuum_learn_word.2701
                    on_arrival_destinations = all_but_last
                }
            }
        }
	}
    option = {
        name = "Maybe not now."
        remove_decision_cooldown = visit_volunruud_thuum_decision
    }
}

## ON ARRIVAL
zzz_thuum_learn_word.2701 = {
    type = character_event
	title = "Word Wall: Volunruud"
    desc = zzz_thuum_intro.2701.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = wilderness_mountains
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        current_travel_plan = {
   			delay_travel_plan = { days = 30 }
        }
    }

    trigger = {

	}

    option = {
		name = "Let's meditate."
        
        trait = thuum_trait_track
        trait = dragonborn

		if = {
            limit = {
                has_trait = dragonborn
            }
            duel = {
                skill = learning
                value = very_high_skill_rating

                100 = {
                    compare_modifier = {
                        value = scope:duel_value
                        multiplier = 3.5
                        # Always give _some_ chance.
                        min = -39
                    }
                    desc = "Your meditation succeeds"
                    custom_tooltip = "You learn a new Word of Power."
                    trigger_event = {
                        id = zzz_thuum_learn_word.2702
                        days = { 30 30 }
                    }
                }
            }
        }
        else = {
            duel = {
                skill = learning
                value = very_high_skill_rating

                40 = {
                    compare_modifier = {
                        value = scope:duel_value
                        multiplier = 3.5
                        # Always give _some_ chance.
                        min = -39
                    }
                    modifier = {
                        has_trait = blessed_by_kyne
                        factor = 2
                    }
                    modifier = {
                        has_trait = diligent
                        factor = 2
                    }
                    modifier = {
                        has_trait = patient
                        factor = 2
                    }
                    modifier = {
                        has_trait = zealous
                        factor = 2
                    }
                    modifier = {
                        has_trait = calm
                        factor = 2
                    }
                    modifier = {
                        culture = {
                            OR = {
                                has_cultural_pillar = heritage_nedic_south
                                has_cultural_pillar = heritage_nedic_north
                                has_cultural_pillar = heritage_nedic_central
                                has_cultural_pillar = heritage_atmoran
                            }
                            factor = 2
                        }
                    }
                    modifier = {
                        has_trait_xp = {
						    trait = thuum_trait_track
						    value >= 100
					    }
                        factor = 3
                    }
                    modifier = {
                        has_trait_xp = {
						    trait = thuum_trait_track
						    value >= 66
					    }
                        factor = 2
                    }
                    modifier = {
                        has_trait_xp = {
						    trait = thuum_trait_track
						    value >= 33
					    }
                        factor = 1
                    }
                    desc = "Your meditation succeeds"
                    custom_tooltip = "You might learn a new Word of Power."
                    trigger_event = {
                        id = zzz_thuum_learn_word.2702
                        days = { 30 30 }
                    }
                }
 
                40 = {
                    compare_modifier = {
                        value = scope:duel_value
                        multiplier = -3.0
                        min = -19
                    }
                    modifier = {
                        has_trait = wrathful
                        factor = 2
                    }
                    modifier = {
                        has_trait = sadistic
                        factor = 2
                    }
                    modifier = {
                        has_trait = cynical
                        factor = 2
                    }
                    modifier = {
                        has_trait = callous
                        factor = 2
                    }
                    modifier = {
                        culture = {
                            NOT = {
                                OR = {
                                    has_cultural_pillar = heritage_nedic_south
                                    has_cultural_pillar = heritage_nedic_north
                                    has_cultural_pillar = heritage_nedic_central
                                    has_cultural_pillar = heritage_atmoran
                                }
                            }
                            factor = 2
                        }
                    }
                    desc = "Your meditation fails"
                    custom_tooltip = "You do not learn a new Word of Power."
                    trigger_event = {
                        id = zzz_thuum_learn_word.2703
                        days = { 30 30 }
                    }
                }
            }
        }
	}
}

##SUCCESS
zzz_thuum_learn_word.2702 = {
    type = character_event
	title = "Success: Volunruud"

    theme = diplomacy_majesty_focus

    override_background = {
		reference = wilderness_mountains
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        if = {
            limit = {
                NOT = {
                    has_perk = dismay_perk
                    has_perk = dismay_two_perk
                    has_perk = dismay_three_perk
                }
            }
            add_character_flag = learned_laas
        }
        else_if = {
            limit = {
                    has_perk = dismay_perk
                NOT = {
                    has_perk = dismay_two_perk
                    has_perk = dismay_three_perk
                }
            }
            add_character_flag = learned_yah
        }
        else = {
            limit = {
                    has_perk = dismay_perk
                    has_perk = dismay_two_perk
                    NOT = {
                        
                    has_perk = dismay_three_perk
                    }
            }
            add_character_flag = learned_nir
        }
    }

    desc = {
        first_valid = {
            triggered_desc = {
                trigger = {
                    NOT = {
                        has_character_flag = learned_laas
                        has_character_flag = learned_yah
                        has_character_flag = learned_nir
                    }
                }
                desc = zzz_thuum_intro.2702.desc.a
            }
            triggered_desc = {
                trigger = {
                    has_character_flag = learned_laas
                    NOT = {
                        has_character_flag = learned_yah
                        has_character_flag = learned_nir
                    }
                }
                desc = zzz_thuum_intro.2702.desc.a
            }
            triggered_desc = {
                trigger = {
                    has_character_flag = learned_laas
                    has_character_flag = learned_yah
                    NOT = {
                        has_character_flag = learned_nir
                    }
                }
                desc = zzz_thuum_intro.2702.desc.b
            }
            desc = zzz_thuum_intro.2702.desc.c
        }
    }

    trigger = {

	}

    option = {
		name = {
            text = {
                first_valid = {
                    triggered_desc = {
                        trigger = {
                            NOT = {
                                has_character_flag = learned_laas
                                has_character_flag = learned_yah
                                has_character_flag = learned_nir
                            }
                        }
                        desc = zzz_thuum_intro.2702.desc.a
                    }
                    triggered_desc = {
                        trigger = {
                            has_character_flag = learned_laas
                            NOT = {
                                has_character_flag = learned_yah
                                has_character_flag = learned_nir
                            }
                        }
                        desc = zzz_thuum_intro.2702.option.a
                    }
                    triggered_desc = {
                        trigger = {
                            has_character_flag = learned_laas
                            has_character_flag = learned_yah
                            NOT = {
                                has_character_flag = learned_nir
                            }
                        }
                        desc = zzz_thuum_intro.2702.option.b
                    }
                    desc = zzz_thuum_intro.2702.option.c
                }
            }
        }
        if = {
            limit = {
                NOT = {
                    has_perk = dismay_perk
                    has_perk = dismay_two_perk
                    has_perk = dismay_three_perk
                }
            }
            add_perk = dismay_perk
            create_character_memory = { type = learned_thuum_word }
        }
        else_if = {
            limit = {
                has_perk = dismay_perk
                NOT = {
                    has_perk = dismay_two_perk
                    has_perk = dismay_three_perk
                }
            }
            add_perk = dismay_two_perk
            create_character_memory = { type = learned_thuum_word }
        }
        else_if = {
            limit = {
            has_perk = dismay_perk
            has_perk = dismay_two_perk
                NOT = {
                    
                    has_perk = dismay_three_perk
                }
            }
            add_perk = dismay_three_perk
            create_character_memory = { type = learned_thuum_word }
        }
	}
}

##FAIL
zzz_thuum_learn_word.2703 = {
    type = character_event
	title = "Failed: Volunruud"
    desc = zzz_thuum_intro.2703.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = wilderness_mountains
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        
    }

    trigger = {

	}

    option = {
		name = "Failure..."
        remove_decision_cooldown = visit_volunruud_thuum_decision
        add_stress = 30
	}
}

## VISIT VOLUNRUUD TOMB EVENT
zzz_thuum_learn_word.2800 = {
    type = character_event
	title = "Word Wall: Raven Rock Mine"
    desc = zzz_thuum_intro.2800.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = temple_church
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        title:b_ravenmine.title_province = {
            save_scope_as = location
        }
    }

    trigger = {

	}

    option = {
		name = "Let's head to Raven Rock Mine!"
		hidden_effect = {
            if = {
                limit = {
                    capital_province.barony = title:b_ravenmine.title_province
                }
                trigger_event = zzz_thuum_learn_word.2801
            }
            else = {
                start_travel_plan = {
                    destination = title:b_ravenmine.title_province
                    on_travel_planner_cancel_on_action = on_cancel_volunruud_event
                    on_arrival_event = zzz_thuum_learn_word.2801
                    on_arrival_destinations = all_but_last
                }
            }
        }
	}
    option = {
        name = "Maybe not now."
        remove_decision_cooldown = visit_raven_thuum_decision
    }
}

## ON ARRIVAL
zzz_thuum_learn_word.2801 = {
    type = character_event
	title = "Word Wall: Raven Rock Mine"
    desc = zzz_thuum_intro.2801.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = wilderness_mountains
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        current_travel_plan = {
   			delay_travel_plan = { days = 30 }
        }
    }

    trigger = {

	}

    option = {
		name = "Let's meditate."
        
        trait = thuum_trait_track
        trait = dragonborn

		if = {
            limit = {
                has_trait = dragonborn
            }
            duel = {
                skill = learning
                value = very_high_skill_rating

                100 = {
                    compare_modifier = {
                        value = scope:duel_value
                        multiplier = 3.5
                        # Always give _some_ chance.
                        min = -39
                    }
                    desc = "Your meditation succeeds"
                    custom_tooltip = "You learn a new Word of Power."
                    trigger_event = {
                        id = zzz_thuum_learn_word.2802
                        days = { 30 30 }
                    }
                }
            }
        }
        else = {
            duel = {
                skill = learning
                value = very_high_skill_rating

                40 = {
                    compare_modifier = {
                        value = scope:duel_value
                        multiplier = 3.5
                        # Always give _some_ chance.
                        min = -39
                    }
                    modifier = {
                        has_trait = blessed_by_kyne
                        factor = 2
                    }
                    modifier = {
                        has_trait = diligent
                        factor = 2
                    }
                    modifier = {
                        has_trait = patient
                        factor = 2
                    }
                    modifier = {
                        has_trait = zealous
                        factor = 2
                    }
                    modifier = {
                        has_trait = calm
                        factor = 2
                    }
                    modifier = {
                        culture = {
                            OR = {
                                has_cultural_pillar = heritage_nedic_south
                                has_cultural_pillar = heritage_nedic_north
                                has_cultural_pillar = heritage_nedic_central
                                has_cultural_pillar = heritage_atmoran
                            }
                            factor = 2
                        }
                    }
                    modifier = {
                        has_trait_xp = {
						    trait = thuum_trait_track
						    value >= 100
					    }
                        factor = 3
                    }
                    modifier = {
                        has_trait_xp = {
						    trait = thuum_trait_track
						    value >= 66
					    }
                        factor = 2
                    }
                    modifier = {
                        has_trait_xp = {
						    trait = thuum_trait_track
						    value >= 33
					    }
                        factor = 1
                    }
                    desc = "Your meditation succeeds"
                    custom_tooltip = "You might learn a new Word of Power."
                    trigger_event = {
                        id = zzz_thuum_learn_word.2802
                        days = { 30 30 }
                    }
                }
 
                40 = {
                    compare_modifier = {
                        value = scope:duel_value
                        multiplier = -3.0
                        min = -19
                    }
                    modifier = {
                        has_trait = wrathful
                        factor = 2
                    }
                    modifier = {
                        has_trait = sadistic
                        factor = 2
                    }
                    modifier = {
                        has_trait = cynical
                        factor = 2
                    }
                    modifier = {
                        has_trait = callous
                        factor = 2
                    }
                    modifier = {
                        culture = {
                            NOT = {
                                OR = {
                                    has_cultural_pillar = heritage_nedic_south
                                    has_cultural_pillar = heritage_nedic_north
                                    has_cultural_pillar = heritage_nedic_central
                                    has_cultural_pillar = heritage_atmoran
                                }
                            }
                            factor = 2
                        }
                    }
                    desc = "Your meditation fails"
                    custom_tooltip = "You do not learn a new Word of Power."
                    trigger_event = {
                        id = zzz_thuum_learn_word.2803
                        days = { 30 30 }
                    }
                }
            }
        }
	}
}

##SUCCESS
zzz_thuum_learn_word.2802 = {
    type = character_event
	title = "Success: Raven Rock Mine"

    theme = diplomacy_majesty_focus

    override_background = {
		reference = wilderness_mountains
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        if = {
            limit = {
                NOT = {
                    has_perk = dragon_aspect_perk
                    has_perk = dragon_aspect_two_perk
                    has_perk = dragon_aspect_three_perk
                }
            }
            add_character_flag = learned_mul
        }
        else_if = {
            limit = {
                    has_perk = dragon_aspect_perk
                NOT = {
                    has_perk = dragon_aspect_two_perk
                    has_perk = dragon_aspect_three_perk
                }
            }
            add_character_flag = learned_qah
        }
        else = {
            limit = {
                    has_perk = dragon_aspect_perk
                    has_perk = dragon_aspect_two_perk
                    NOT = {
                        
                    has_perk = dragon_aspect_three_perk
                    }
            }
            add_character_flag = learned_diiv
        }
    }

    desc = {
        first_valid = {
            triggered_desc = {
                trigger = {
                    NOT = {
                        has_character_flag = learned_mul
                        has_character_flag = learned_qah
                        has_character_flag = learned_diiv
                    }
                }
                desc = zzz_thuum_intro.2802.desc.a
            }
            triggered_desc = {
                trigger = {
                    has_character_flag = learned_mul
                    NOT = {
                        has_character_flag = learned_qah
                        has_character_flag = learned_diiv
                    }
                }
                desc = zzz_thuum_intro.2802.desc.a
            }
            triggered_desc = {
                trigger = {
                    has_character_flag = learned_mul
                    has_character_flag = learned_qah
                    NOT = {
                        has_character_flag = learned_diiv
                    }
                }
                desc = zzz_thuum_intro.2802.desc.b
            }
            desc = zzz_thuum_intro.2802.desc.c
        }
    }

    trigger = {

	}

    option = {
		name = {
            text = {
                first_valid = {
                    triggered_desc = {
                        trigger = {
                            NOT = {
                                has_character_flag = learned_mul
                                has_character_flag = learned_qah
                                has_character_flag = learned_diiv
                            }
                        }
                        desc = zzz_thuum_intro.2802.desc.a
                    }
                    triggered_desc = {
                        trigger = {
                            has_character_flag = learned_mul
                            NOT = {
                                has_character_flag = learned_qah
                                has_character_flag = learned_diiv
                            }
                        }
                        desc = zzz_thuum_intro.2802.option.a
                    }
                    triggered_desc = {
                        trigger = {
                            has_character_flag = learned_mul
                            has_character_flag = learned_qah
                            NOT = {
                                has_character_flag = learned_diiv
                            }
                        }
                        desc = zzz_thuum_intro.2802.option.b
                    }
                    desc = zzz_thuum_intro.2802.option.c
                }
            }
        }
        if = {
            limit = {
                NOT = {
                    has_perk = dragon_aspect_perk
                    has_perk = dragon_aspect_two_perk
                    has_perk = dragon_aspect_three_perk
                }
            }
            add_perk = dragon_aspect_perk
            create_character_memory = { type = learned_thuum_word }
        }
        else_if = {
            limit = {
                has_perk = dragon_aspect_perk
                NOT = {
                    has_perk = dragon_aspect_two_perk
                    has_perk = dragon_aspect_three_perk
                }
            }
            add_perk = dragon_aspect_two_perk
            create_character_memory = { type = learned_thuum_word }
        }
        else_if = {
            limit = {
            has_perk = dragon_aspect_perk
            has_perk = dragon_aspect_two_perk
                NOT = {
                    
                    has_perk = dragon_aspect_three_perk
                }
            }
            add_perk = dragon_aspect_three_perk
            create_character_memory = { type = learned_thuum_word }
        }
	}
}

##FAIL
zzz_thuum_learn_word.2803 = {
    type = character_event
	title = "Failed: Raven Rock Mine"
    desc = zzz_thuum_intro.2803.desc
    theme = diplomacy_majesty_focus

    override_background = {
		reference = wilderness_mountains
	}

    left_portrait = {
		character = root
		animation = interested
	}


    immediate = {
        
    }

    trigger = {

	}

    option = {
		name = "Failure..."
        remove_decision_cooldown = visit_raven_thuum_decision
        add_stress = 30
	}
}